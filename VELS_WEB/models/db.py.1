# -*- coding: utf-8 -*-

###################################################
################### SEMESTER ######################
###################################################
semester= DAL('sqlite://semester.db')

semester.define_table('Users',
    Field('UserId','integer',rname='UserId'),
    Field('Name','string',requires=IS_NOT_EMPTY()),
    Field('Email','string',rname='email',requires=IS_EMAIL()),
    Field('FirstMail','integer',rname='first_mail'),
    Field('LastDone','integer',rname='last_done'),
    Field('CurrentTask','integer',rname='current_task'),
    migrate=False,primarykey=['UserId'])
Users=semester.Users

semester.define_table('TaskStats',
    Field('TaskId','integer'),  
    Field('NrSubmissions','integer',rname='nr_submissions'), 
    Field('NrSuccessfull','integer',rname='nr_successfull'), 
    migrate=False,primarykey=['TaskId'])
TaskStats=semester.TaskStats

semester.define_table('StatCounters',
    Field('CounterId','integer'),  
    Field('Name','string'), 
    Field('Value','integer',rname='value'), 
    migrate=False,primarykey=['CounterId'])
StatCounters=semester.StatCounters

semester.define_table('UserTasks',
    Field('UniqueId','integer',rname='uniqueID'),  
    Field('TaskNr','integer'), 
    Field('UserId','integer'), 
    Field('TaskParameters','string'),  
    Field('TaskDescription','string'), 
    Field('TaskAttachments','string'),
    migrate=False,primarykey=['UniqueId'])
UserTasks=semester.UserTasks

###################################################
##################### COURSE ######################
###################################################
course= DAL('sqlite://course.db')
course._uri

course.define_table('SpecialMessages',
    Field('EventName','string'),
    Field('EventText','string'),
    migrate=False,primarykey=['EventName'])
SpecialMessages=course.SpecialMessages

course.define_table('TaskConfiguration',
    Field('TaskNr','integer'),
    Field('TaskStart','integer'),
    Field('TaskDeadline','integer'),
    Field('PathToTask','string'),
    Field('GeneratorExecutable','string'),
    Field('TestExecutable','string'),
    Field('Score','integer'),
    Field('TaskOperator','string'),
    migrate=False,primarykey=['TaskNr'])
TaskConfiguration=course.TaskConfiguration

course.define_table('GeneralConfig',
    Field('ConfigItem','string'),
    Field('Content','string'),
    migrate=False,primarykey=['ConfigItem'])
GeneralConfig=course.GeneralConfig

#Users.insert(name="Martin", email= "martin.mosbeck@gmx.at")
